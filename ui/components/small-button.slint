import { Palette, StyleMetrics } from "std-widgets.slint";
import { Utils } from "../state.slint";
import { Constants } from "../constants.slint";
import { HorizontalStart, HorizontalCenter } from "horizontal.slint";

export component SmallButton inherits Rectangle {
    in property <string> text;
    in property <image> icon;
    callback clicked();

    background: Palette.control-background;
    border-radius: Constants.radius-lg;

    states [
        pressed when touch-area.pressed : {
            root.opacity: 0.5;
        }
    ]

    GridLayout {
        padding-left: Constants.padding-half;
        padding-right: Constants.padding-half;
    
        Rectangle {
            touch-area := TouchArea {
                clicked => { root.clicked(); }
            }

            HorizontalCenter {
                spacing: Constants.spacing-half;
                if Utils.image_exists(root.icon) : Image {
                    source: root.icon;
                    colorize: Palette.control-foreground;
                    vertical-alignment: center;
                }

                Text {
                    text: root.text;
                    color: Palette.control-foreground;
                    vertical-alignment: center;
                    font-size: 12px;
                }
            }
        }
    }
}